# Hello Triangle

A simple hello triangle example that uses all modern graphics APIs.

## Setup

### Build Shader Compiler/Transpiler

First we're going to need to build our tools to compile our shader, GLSLangValidator (comes with the Vulkan SDK, but is also bundled as a submodule here) and [SPIRV-Cross](https://github.com/KhronosGroup/SPIRV-Cross).

```bash
# üî® Let's build SPIRV-Cross and GLSLangValidator to compile our shaders
# These were included in the `/external/` folder of this repo:
cd ../../external/spirv-cross
mkdir spirv-cross
cd spirv-cross
cmake ..
cmake --build . --config Release

cd ../glslangvalidator
mkdir build
cd build
cmake ..
cmake --build . --config Release

# Go to the shaders folder
cd ../../demos/hello-triangle/assets/shaders

# Make build folder
mkdir ../bin
```

### Compile Shaders

Now we can compile our shaders for the example, we'll be placing them where the final executable will be so it can read their files.

```bash
# üåã Compile shaders to SPIR-V binary
../../../../external/glslang/build/StandAlone/Release/glslangValidator -V triangle.vert -o ../bin/triangle.vert.spv
../../../../external/glslang/build/StandAlone/Release/glslangValidator -V triangle.frag -o ../bin/triangle.frag.spv

# ‚ùé HLSL
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.vert.spv --hlsl --output ../bin/triangle.vert.hlsl
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.frag.spv --hlsl --output ../bin/triangle.frag.hlsl

# ‚ö™ OpenGL ES 3.1
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.vert.spv --version 310 --es --output ../bin/triangle.vert.glsl
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.frag.spv --version 310 --es --output ../bin/triangle.frag.glsl

# ü§ñ Metal
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.vert.spv --msl --output ../bin/triangle.vert.msl
../../../../external/spirv-cross/spirv-cross/Release/spirv-cross build/triangle.frag.spv --msl --output ../bin/triangle.frag.msl
```

### Compile Demo

Finally we need to build our actual example:

```bash
# üñºÔ∏è To build your Visual Studio solution on Windows x64
mkdir visualstudio
cd visualstudio
cmake .. -A x64

# üçé To build your XCode project On Mac OS for Mac OS / iOS
mkdir xcode
cd xcode
cmake .. -G Xcode

# üêß To build your .make file on Linux
mkdir make
cd make
cmake ..

# üî® Build on any platform:
cmake --build .
```
For WebAssembly you'll need to have [Emscripten](http://kripken.github.io/emscripten-site/docs/getting_started/downloads.html) installed. Assuming you have the SDK installed, do the following to build a WebAssembly project:

```bash
# üåê For WebAssembly Projects
mkdir webassembly
cd webassembly
cmake .. -DXWIN_OS=WASM -DCMAKE_TOOLCHAIN_FILE="$EMSDK/emscripten/1.38.1/cmake/Modules/Platform/Emscripten.cmake" -DCMAKE_BUILD_TYPE=Release

# Run emconfigure with the normal configure command as an argument.
$EMSDK/emscripten/emconfigure ./configure

# Run emmake with the normal make to generate linked LLVM bitcode.
$EMSDK/emscripten/emmake make

# Compile the linked bitcode generated by make (project.bc) to JavaScript.
#  'project.bc' should be replaced with the make output for your project (e.g. 'yourproject.so')
$EMSDK/emscripten/emcc project.bc -o project.js
```

For more information visit the [Emscripten Docs on CMake](https://kripken.github.io/emscripten-site/docs/compiling/Building-Projects.html#using-libraries).

For **Android Studio** you'll need to make a project, then edit your `build.gradle` file.

```groovy
// ü§ñ To build your Android Studio project
android {
    ...
    externalNativeBuild {
        cmake {
            ...
            // Use the following syntax when passing arguments to variables:
            // arguments "-DVAR_NAME=ARGUMENT".
            arguments "-DXWIN_OS=ANDROID",
            // The following line passes 'rtti' and 'exceptions' to 'ANDROID_CPP_FEATURES'.
            "-DANDROID_CPP_FEATURES=rtti exceptions"
        }
    }
  buildTypes {...}

  // Use this block to link Gradle to your CMake build script.
  externalNativeBuild {
    cmake {...}
  }
}
```